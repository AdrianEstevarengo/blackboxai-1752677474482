<div id="chatbot-toggle">
    <img src="/images/DogoNoBg.gif" id="chatbot-icon" />
    <div id="chat-notification">!</div>
</div>

<div id="chatbot-container" style="display: none;">
    <div id="dog-mascot"></div>
    <div id="chat-window">
        <div id="chat-header">
            <span>Supel Dog</span>
            <img style="width:50px; height:50px;" src="/images/DogoNoBg.gif" class="header-dog-gif" />
        </div>
        <div id="chat-messages"></div>

        <div id="chat-input-area">
            <input type="text" id="chat-input" placeholder="Digite sua mensagem..." />
            <button id="send-button">Enter</button>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.0/signalr.min.js"></script>
<script src="~/js/chatbot.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const chatContainer = document.getElementById('chatbot-container');
        const chatToggle = document.getElementById('chatbot-toggle');
        const chatHeader = document.getElementById('chat-header');
        let isChatOpen = false;

        function abrirChat() {
            chatContainer.style.display = 'block';
            chatToggle.style.display = 'none';
        }

        function fecharChat() {
            chatContainer.style.display = 'none';
            chatToggle.style.display = 'block';
        }

        chatToggle.addEventListener('click', abrirChat);
        chatHeader.addEventListener('click', fecharChat);

        // Estado inicial
        chatContainer.style.display = 'none';
        chatToggle.style.display = 'block';
    });
</script>




<style>
    /* Botão flutuante do mascote */
    #chatbot-toggle {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 10001;
        cursor: pointer;
    }

    #chatbot-icon {
        width: 80px;
        height: 80px;
        animation: bounce 2s infinite;
    }

    /* Notificação */
    #chat-notification {
        position: absolute;
        top: 0;
        right: 0;
        background: red;
        color: white;
        width: 22px;
        height: 22px;
        border-radius: 50%;
        text-align: center;
        font-size: 14px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: pulse 1.5s infinite;
    }

    /* Mensagem container */
    .chat-message {
        display: flex;
        margin-bottom: 10px;
        padding: 0 10px;
    }

    /* Mensagem do usuário (direita) */
    .user-message {
        justify-content: flex-end;
    }

    .user-message .message-content {
        background-color: #dcf8c6;
        color: #000;
        padding: 10px 15px;
        border-radius: 20px 20px 0 20px;
        max-width: 70%;
        position: relative;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        text-align: right;
    }

    .user-message .message-content::after {
        content: "";
        position: absolute;
        right: -10px;
        top: 10px;
        width: 0;
        height: 0;
        border-top: 10px solid transparent;
        border-left: 10px solid #dcf8c6;
        border-bottom: 10px solid transparent;
    }

    /* Mensagem do bot (esquerda) */
    /* Mensagem do bot (esquerda) */
    .bot-message {
        justify-content: flex-start;
    }

    .bot-message .message-content {
        background-color: #7a9ccf;
        color: white;
        padding: 10px 15px;
        border-radius: 20px 20px 20px 0;
        max-width: 70%;
        position: relative;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        text-align: left;
    }

    .bot-message .message-content::after {
        content: "";
        position: absolute;
        left: -10px;
        top: 10px;
        width: 0;
        height: 0;
        border-top: 10px solid transparent;
        border-right: 10px solid #7a9ccf;
        border-bottom: 10px solid transparent;
    }

    /* Estilo geral */
    #chatbot-container {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 600px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        z-index: 10000;
    }

    /* Mascote */
    #dog-mascot {
        width: 120px;
        height: 120px;
        background-image: url('/images/dog.gif');
        /* substitua pelo seu gif */
        background-size: contain;
        background-repeat: no-repeat;
        margin: 0 auto;
        animation: bounce 1.5s infinite;
    }

    /* Janela do chat */
    #chat-window {
        background: hsl(0, 0%, 100%);
        border: 2px solid #007bff;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        margin-top: 10px;
        height: 650px;
        display: flex;
        flex-direction: column;
    }

    #chat-header {
        background-color: #3399ff;
        /* azul mais claro */
        color: white;
        font-weight: bold;
        text-align: center;
        padding: 12px 15px;
        border-radius: 15px 15px 0 0;
        /* só arredonda as bordas de cima */
        margin-bottom: 10px;
        font-size: 18px;
        box-shadow: 0 3px 6px rgba(51, 153, 255, 0.5);
        /* sombra azul clara embaixo */
        width: 100%;
        box-sizing: border-box;
    }

    /* Mensagens */
    #chat-messages {
        flex: 1;
        overflow-y: auto;
        padding-right: 5px;
        margin-bottom: 10px;
        font-size: 20px;
    }

    /* Área de entrada */
    #chat-input-area {
        display: flex;
        align-items: center;
        padding: 10px 15px;
        /* espaçamento interno para input e botão */
        border-top: 1px solid #ddd;
        /* opcional: linha sutil para separar a área de mensagens do input */
        background-color: #fafafa;
        /* opcional: leve fundo para destacar */
    }


    #chat-input {
        flex: 1;
        padding: 10px;
        font-size: 14px;
        border-radius: 8px;
        border: 1px solid #ccc;
        outline: none;
    }

    #send-button {
        padding: 10px 16px;
        background: #007bff;
        color: white;
        font-weight: bold;
        border: none;
        border-radius: 8px;
        margin-left: 10px;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    #send-button:hover {
        background: #0056b3;
    }

    /* Scroll bonito */
    #chat-messages::-webkit-scrollbar {
        width: 8px;
    }

    #chat-messages::-webkit-scrollbar-thumb {
        background-color: #007bff;
        border-radius: 4px;
    }
</style>
